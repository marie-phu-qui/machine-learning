{"dependencies":[{"name":"/home/student/workspace/Lord-of-the-News/server/tensorflow/text-classif/package.json","includedInParent":true,"mtime":1538517523128},{"name":"@tensorflow/tfjs","loc":{"line":20,"column":20}}],"generated":{"js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TextData = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _tfjs = require('@tensorflow/tfjs');\n\nvar tf = _interopRequireWildcard(_tfjs);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } } // This file treats the text data - can be twitched to fit our preferences\n\n/**\n * @license\n * Copyright 2018 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\n/**\n * A class for text data.\n *\n * This class manages the following:\n *\n * - Converting training data (as a string) into one-hot encoded vectors.\n * - Drawing random slices from the training data. This is useful for training\n *   models and obtaining the seed text for model-based text generation.\n */\nvar TextData = exports.TextData = function () {\n  /**\n   * Constructor of TextData.\n   *\n   * @param {string} dataIdentifier An identifier for this instance of TextData.\n   * @param {string} textString The training text data.\n   * @param {number} sampleLen Length of each training example, i.e., the input\n   *   sequence length expected by the LSTM model.\n   * @param {number} sampleStep How many characters to skip when going from one\n   *   example of the training data (in `textString`) to the next.\n   */\n  function TextData(dataIdentifier, textString, sampleLen, sampleStep) {\n    _classCallCheck(this, TextData);\n\n    if (!dataIdentifier) {\n      throw new Error('Model identifier is not provided.');\n    }\n\n    this.dataIdentifier_ = dataIdentifier;\n\n    this.textString_ = textString;\n    this.textLen_ = textString.length;\n    this.sampleLen_ = sampleLen;\n    this.sampleStep_ = sampleStep;\n\n    this.getCharSet_();\n    this.convertAllTextToIndices_();\n    this.generateExampleBeginIndices_();\n  }\n\n  /**\n   * Get data identifier.\n   *\n   * @returns {string} The data identifier.\n   */\n\n\n  _createClass(TextData, [{\n    key: 'dataIdentifier',\n    value: function dataIdentifier() {\n      return this.dataIdentifier_;\n    }\n\n    /**\n     * Get length of the training text data.\n     *\n     * @returns {number} Length of training text data.\n     */\n\n  }, {\n    key: 'textLen',\n    value: function textLen() {\n      return this.textLen_;\n    }\n\n    /**\n     * Get the length of each training example.\n     */\n\n  }, {\n    key: 'sampleLen',\n    value: function sampleLen() {\n      return this.sampleLen_;\n    }\n\n    /**\n     * Get the size of the character set.\n     *\n     * @returns {number} Size of the character set, i.e., how many unique\n     *   characters there are in the training text data.\n     */\n\n  }, {\n    key: 'charSetSize',\n    value: function charSetSize() {\n      return this.charSetSize_;\n    }\n\n    /**\n     * Generate the next epoch of data for training models.\n     *\n     * @param {number} numExamples Number examples to generate.\n     * @returns {[tf.Tensor, tf.Tensor]} `xs` and `ys` Tensors.\n     *   `xs` has the shape of `[numExamples, this.sampleLen, this.charSetSize]`.\n     *   `ys` has the shape of `[numExamples, this.charSetSize]`.\n     */\n\n  }, {\n    key: 'nextDataEpoch',\n    value: function nextDataEpoch(numExamples) {\n      var xsBuffer = new tf.TensorBuffer([numExamples, this.sampleLen_, this.charSetSize_]);\n      var ysBuffer = new tf.TensorBuffer([numExamples, this.charSetSize_]);\n      for (var i = 0; i < numExamples; ++i) {\n        var beginIndex = this.exampleBeginIndices_[this.examplePosition_ % this.exampleBeginIndices_.length];\n        for (var j = 0; j < this.sampleLen_; ++j) {\n          xsBuffer.set(1, i, j, this.indices_[beginIndex + j]);\n        }\n        ysBuffer.set(1, i, this.indices_[beginIndex + this.sampleLen_]);\n        this.examplePosition_++;\n      }\n      return [xsBuffer.toTensor(), ysBuffer.toTensor()];\n    }\n\n    /**\n     * Get the unique character at given index from the character set.\n     *\n     * @param {number} index\n     * @returns {string} The unique character at `index` of the character set.\n     */\n\n  }, {\n    key: 'getFromCharSet',\n    value: function getFromCharSet(index) {\n      return this.charSet_[index];\n    }\n\n    /**\n     * Convert text string to integer indices.\n     *\n     * @param {string} text Input text.\n     * @returns {number[]} Indices of the characters of `text`.\n     */\n\n  }, {\n    key: 'textToIndices',\n    value: function textToIndices(text) {\n      var indices = [];\n      for (var i = 0; i < text.length; ++i) {\n        indices.push(this.charSet_.indexOf(text[i]));\n      }\n      return indices;\n    }\n\n    /**\n     * Get a random slice of text data.\n     *\n     * @returns {[string, number[]} The string and index representation of the\n     *   same slice.\n     */\n\n  }, {\n    key: 'getRandomSlice',\n    value: function getRandomSlice() {\n      var startIndex = Math.round(Math.random() * (this.textLen_ - this.sampleLen_ - 1));\n      var textSlice = this.slice_(startIndex, startIndex + this.sampleLen_);\n      return [textSlice, this.textToIndices(textSlice)];\n    }\n\n    /**\n     * Get a slice of the training text data.\n     *\n     * @param {number} startIndex\n     * @param {number} endIndex\n     * @param {bool} useIndices Whether to return the indices instead of string.\n     * @returns {string | Uint16Array} The result of the slicing.\n     */\n\n  }, {\n    key: 'slice_',\n    value: function slice_(startIndex, endIndex) {\n      return this.textString_.slice(startIndex, endIndex);\n    }\n\n    /**\n     * Get the set of unique characters from text.\n     */\n\n  }, {\n    key: 'getCharSet_',\n    value: function getCharSet_() {\n      this.charSet_ = [];\n      for (var i = 0; i < this.textLen_; ++i) {\n        if (this.charSet_.indexOf(this.textString_[i]) === -1) {\n          this.charSet_.push(this.textString_[i]);\n        }\n      }\n      this.charSetSize_ = this.charSet_.length;\n    }\n\n    /**\n     * Convert all training text to integer indices.\n     */\n\n  }, {\n    key: 'convertAllTextToIndices_',\n    value: function convertAllTextToIndices_() {\n      this.indices_ = new Uint16Array(this.textToIndices(this.textString_));\n    }\n\n    /**\n     * Generate the example-begin indices; shuffle them randomly.\n     */\n\n  }, {\n    key: 'generateExampleBeginIndices_',\n    value: function generateExampleBeginIndices_() {\n      // Prepare beginning indices of examples.\n      this.exampleBeginIndices_ = [];\n      for (var i = 0; i < this.textLen_ - this.sampleLen_ - 1; i += this.sampleStep_) {\n        this.exampleBeginIndices_.push(i);\n      }\n\n      // Randomly shuffle the beginning indices.\n      tf.util.shuffle(this.exampleBeginIndices_);\n      this.examplePosition_ = 0;\n    }\n  }]);\n\n  return TextData;\n}();","map":{"mappings":[{"generated":{"line":10,"column":0},"source":"data.js","original":{"line":20,"column":0}},{"name":"tf","generated":{"line":12,"column":4},"source":"data.js","original":{"line":20,"column":12}},{"generated":{"line":16,"column":154},"source":"data.js","original":{"line":1,"column":0}},{"generated":{"line":18,"column":0},"source":"data.js","original":{"line":3,"column":0}},{"generated":{"line":35,"column":0},"source":"data.js","original":{"line":22,"column":0}},{"name":"TextData","generated":{"line":44,"column":4},"source":"data.js","original":{"line":31,"column":13}},{"name":"TextData","generated":{"line":44,"column":23},"source":"data.js","original":{"line":31,"column":13}},{"generated":{"line":45,"column":0},"source":"data.js","original":{"line":32,"column":2}},{"generated":{"line":55,"column":0},"source":"data.js","original":{"line":42,"column":2}},{"name":"dataIdentifier","generated":{"line":55,"column":20},"source":"data.js","original":{"line":42,"column":14}},{"generated":{"line":55,"column":34},"source":"data.js","original":{"line":42,"column":2}},{"name":"textString","generated":{"line":55,"column":36},"source":"data.js","original":{"line":42,"column":30}},{"generated":{"line":55,"column":46},"source":"data.js","original":{"line":42,"column":2}},{"name":"sampleLen","generated":{"line":55,"column":48},"source":"data.js","original":{"line":42,"column":42}},{"generated":{"line":55,"column":57},"source":"data.js","original":{"line":42,"column":2}},{"name":"sampleStep","generated":{"line":55,"column":59},"source":"data.js","original":{"line":42,"column":53}},{"generated":{"line":55,"column":69},"source":"data.js","original":{"line":42,"column":2}},{"generated":{"line":55,"column":71},"source":"data.js","original":{"line":42,"column":65}},{"generated":{"line":56,"column":0},"source":"data.js","original":{"line":42,"column":65}},{"generated":{"line":58,"column":0},"source":"data.js","original":{"line":43,"column":4}},{"generated":{"line":58,"column":8},"source":"data.js","original":{"line":43,"column":8}},{"name":"dataIdentifier","generated":{"line":58,"column":9},"source":"data.js","original":{"line":43,"column":9}},{"generated":{"line":58,"column":23},"source":"data.js","original":{"line":43,"column":4}},{"generated":{"line":58,"column":25},"source":"data.js","original":{"line":43,"column":25}},{"generated":{"line":59,"column":0},"source":"data.js","original":{"line":44,"column":6}},{"generated":{"line":59,"column":12},"source":"data.js","original":{"line":44,"column":12}},{"name":"Error","generated":{"line":59,"column":16},"source":"data.js","original":{"line":44,"column":16}},{"generated":{"line":59,"column":21},"source":"data.js","original":{"line":44,"column":12}},{"generated":{"line":59,"column":22},"source":"data.js","original":{"line":44,"column":22}},{"generated":{"line":59,"column":57},"source":"data.js","original":{"line":44,"column":12}},{"generated":{"line":59,"column":58},"source":"data.js","original":{"line":44,"column":6}},{"generated":{"line":60,"column":0},"source":"data.js","original":{"line":45,"column":5}},{"generated":{"line":62,"column":0},"source":"data.js","original":{"line":47,"column":4}},{"name":"dataIdentifier_","generated":{"line":62,"column":9},"source":"data.js","original":{"line":47,"column":9}},{"generated":{"line":62,"column":24},"source":"data.js","original":{"line":47,"column":4}},{"name":"dataIdentifier","generated":{"line":62,"column":27},"source":"data.js","original":{"line":47,"column":27}},{"generated":{"line":62,"column":41},"source":"data.js","original":{"line":47,"column":4}},{"generated":{"line":64,"column":0},"source":"data.js","original":{"line":49,"column":4}},{"name":"textString_","generated":{"line":64,"column":9},"source":"data.js","original":{"line":49,"column":9}},{"generated":{"line":64,"column":20},"source":"data.js","original":{"line":49,"column":4}},{"name":"textString","generated":{"line":64,"column":23},"source":"data.js","original":{"line":49,"column":23}},{"generated":{"line":64,"column":33},"source":"data.js","original":{"line":49,"column":4}},{"generated":{"line":65,"column":0},"source":"data.js","original":{"line":50,"column":4}},{"name":"textLen_","generated":{"line":65,"column":9},"source":"data.js","original":{"line":50,"column":9}},{"generated":{"line":65,"column":17},"source":"data.js","original":{"line":50,"column":4}},{"name":"textString","generated":{"line":65,"column":20},"source":"data.js","original":{"line":50,"column":20}},{"name":"length","generated":{"line":65,"column":31},"source":"data.js","original":{"line":50,"column":31}},{"generated":{"line":65,"column":37},"source":"data.js","original":{"line":50,"column":4}},{"generated":{"line":66,"column":0},"source":"data.js","original":{"line":51,"column":4}},{"name":"sampleLen_","generated":{"line":66,"column":9},"source":"data.js","original":{"line":51,"column":9}},{"generated":{"line":66,"column":19},"source":"data.js","original":{"line":51,"column":4}},{"name":"sampleLen","generated":{"line":66,"column":22},"source":"data.js","original":{"line":51,"column":22}},{"generated":{"line":66,"column":31},"source":"data.js","original":{"line":51,"column":4}},{"generated":{"line":67,"column":0},"source":"data.js","original":{"line":52,"column":4}},{"name":"sampleStep_","generated":{"line":67,"column":9},"source":"data.js","original":{"line":52,"column":9}},{"generated":{"line":67,"column":20},"source":"data.js","original":{"line":52,"column":4}},{"name":"sampleStep","generated":{"line":67,"column":23},"source":"data.js","original":{"line":52,"column":23}},{"generated":{"line":67,"column":33},"source":"data.js","original":{"line":52,"column":4}},{"generated":{"line":69,"column":0},"source":"data.js","original":{"line":54,"column":4}},{"name":"getCharSet_","generated":{"line":69,"column":9},"source":"data.js","original":{"line":54,"column":9}},{"generated":{"line":69,"column":20},"source":"data.js","original":{"line":54,"column":4}},{"generated":{"line":70,"column":0},"source":"data.js","original":{"line":55,"column":4}},{"name":"convertAllTextToIndices_","generated":{"line":70,"column":9},"source":"data.js","original":{"line":55,"column":9}},{"generated":{"line":70,"column":33},"source":"data.js","original":{"line":55,"column":4}},{"generated":{"line":71,"column":0},"source":"data.js","original":{"line":56,"column":4}},{"name":"generateExampleBeginIndices_","generated":{"line":71,"column":9},"source":"data.js","original":{"line":56,"column":9}},{"generated":{"line":71,"column":37},"source":"data.js","original":{"line":56,"column":4}},{"generated":{"line":72,"column":0},"source":"data.js","original":{"line":57,"column":3}},{"generated":{"line":74,"column":0},"source":"data.js","original":{"line":59,"column":2}},{"generated":{"line":83,"column":37},"source":"data.js","original":{"line":64,"column":19}},{"generated":{"line":84,"column":0},"source":"data.js","original":{"line":65,"column":4}},{"generated":{"line":84,"column":13},"source":"data.js","original":{"line":65,"column":11}},{"name":"dataIdentifier_","generated":{"line":84,"column":18},"source":"data.js","original":{"line":65,"column":16}},{"generated":{"line":84,"column":33},"source":"data.js","original":{"line":65,"column":4}},{"generated":{"line":85,"column":0},"source":"data.js","original":{"line":66,"column":3}},{"generated":{"line":87,"column":0},"source":"data.js","original":{"line":68,"column":2}},{"generated":{"line":95,"column":30},"source":"data.js","original":{"line":73,"column":12}},{"generated":{"line":96,"column":0},"source":"data.js","original":{"line":74,"column":4}},{"generated":{"line":96,"column":13},"source":"data.js","original":{"line":74,"column":11}},{"name":"textLen_","generated":{"line":96,"column":18},"source":"data.js","original":{"line":74,"column":16}},{"generated":{"line":96,"column":26},"source":"data.js","original":{"line":74,"column":4}},{"generated":{"line":97,"column":0},"source":"data.js","original":{"line":75,"column":3}},{"generated":{"line":99,"column":0},"source":"data.js","original":{"line":77,"column":2}},{"generated":{"line":105,"column":32},"source":"data.js","original":{"line":80,"column":14}},{"generated":{"line":106,"column":0},"source":"data.js","original":{"line":81,"column":4}},{"generated":{"line":106,"column":13},"source":"data.js","original":{"line":81,"column":11}},{"name":"sampleLen_","generated":{"line":106,"column":18},"source":"data.js","original":{"line":81,"column":16}},{"generated":{"line":106,"column":28},"source":"data.js","original":{"line":81,"column":4}},{"generated":{"line":107,"column":0},"source":"data.js","original":{"line":82,"column":3}},{"generated":{"line":109,"column":0},"source":"data.js","original":{"line":84,"column":2}},{"generated":{"line":118,"column":34},"source":"data.js","original":{"line":90,"column":16}},{"generated":{"line":119,"column":0},"source":"data.js","original":{"line":91,"column":4}},{"generated":{"line":119,"column":13},"source":"data.js","original":{"line":91,"column":11}},{"name":"charSetSize_","generated":{"line":119,"column":18},"source":"data.js","original":{"line":91,"column":16}},{"generated":{"line":119,"column":30},"source":"data.js","original":{"line":91,"column":4}},{"generated":{"line":120,"column":0},"source":"data.js","original":{"line":92,"column":3}},{"generated":{"line":122,"column":0},"source":"data.js","original":{"line":94,"column":2}},{"name":"numExamples","generated":{"line":133,"column":34},"source":"data.js","original":{"line":102,"column":16}},{"generated":{"line":133,"column":47},"source":"data.js","original":{"line":102,"column":29}},{"generated":{"line":134,"column":0},"source":"data.js","original":{"line":103,"column":4}},{"name":"xsBuffer","generated":{"line":134,"column":10},"source":"data.js","original":{"line":103,"column":10}},{"generated":{"line":134,"column":21},"source":"data.js","original":{"line":103,"column":21}},{"name":"tf","generated":{"line":134,"column":25},"source":"data.js","original":{"line":103,"column":25}},{"name":"TensorBuffer","generated":{"line":134,"column":28},"source":"data.js","original":{"line":103,"column":28}},{"generated":{"line":134,"column":40},"source":"data.js","original":{"line":103,"column":21}},{"generated":{"line":134,"column":41},"source":"data.js","original":{"line":103,"column":41}},{"name":"numExamples","generated":{"line":134,"column":42},"source":"data.js","original":{"line":104,"column":6}},{"generated":{"line":134,"column":53},"source":"data.js","original":{"line":103,"column":41}},{"generated":{"line":134,"column":55},"source":"data.js","original":{"line":104,"column":19}},{"name":"sampleLen_","generated":{"line":134,"column":60},"source":"data.js","original":{"line":104,"column":24}},{"generated":{"line":134,"column":70},"source":"data.js","original":{"line":103,"column":41}},{"generated":{"line":134,"column":72},"source":"data.js","original":{"line":104,"column":36}},{"name":"charSetSize_","generated":{"line":134,"column":77},"source":"data.js","original":{"line":104,"column":41}},{"generated":{"line":134,"column":89},"source":"data.js","original":{"line":103,"column":41}},{"generated":{"line":134,"column":90},"source":"data.js","original":{"line":103,"column":21}},{"generated":{"line":134,"column":91},"source":"data.js","original":{"line":103,"column":4}},{"generated":{"line":135,"column":0},"source":"data.js","original":{"line":105,"column":4}},{"name":"ysBuffer","generated":{"line":135,"column":10},"source":"data.js","original":{"line":105,"column":10}},{"generated":{"line":135,"column":21},"source":"data.js","original":{"line":105,"column":21}},{"name":"tf","generated":{"line":135,"column":25},"source":"data.js","original":{"line":105,"column":25}},{"name":"TensorBuffer","generated":{"line":135,"column":28},"source":"data.js","original":{"line":105,"column":28}},{"generated":{"line":135,"column":40},"source":"data.js","original":{"line":105,"column":21}},{"generated":{"line":135,"column":41},"source":"data.js","original":{"line":105,"column":41}},{"name":"numExamples","generated":{"line":135,"column":42},"source":"data.js","original":{"line":105,"column":42}},{"generated":{"line":135,"column":53},"source":"data.js","original":{"line":105,"column":41}},{"generated":{"line":135,"column":55},"source":"data.js","original":{"line":105,"column":55}},{"name":"charSetSize_","generated":{"line":135,"column":60},"source":"data.js","original":{"line":105,"column":60}},{"generated":{"line":135,"column":72},"source":"data.js","original":{"line":105,"column":41}},{"generated":{"line":135,"column":73},"source":"data.js","original":{"line":105,"column":21}},{"generated":{"line":135,"column":74},"source":"data.js","original":{"line":105,"column":4}},{"generated":{"line":136,"column":0},"source":"data.js","original":{"line":106,"column":4}},{"generated":{"line":136,"column":11},"source":"data.js","original":{"line":106,"column":9}},{"name":"i","generated":{"line":136,"column":15},"source":"data.js","original":{"line":106,"column":13}},{"generated":{"line":136,"column":19},"source":"data.js","original":{"line":106,"column":17}},{"generated":{"line":136,"column":20},"source":"data.js","original":{"line":106,"column":4}},{"name":"i","generated":{"line":136,"column":22},"source":"data.js","original":{"line":106,"column":20}},{"name":"numExamples","generated":{"line":136,"column":26},"source":"data.js","original":{"line":106,"column":24}},{"generated":{"line":136,"column":37},"source":"data.js","original":{"line":106,"column":4}},{"generated":{"line":136,"column":39},"source":"data.js","original":{"line":106,"column":37}},{"name":"i","generated":{"line":136,"column":41},"source":"data.js","original":{"line":106,"column":39}},{"generated":{"line":136,"column":42},"source":"data.js","original":{"line":106,"column":4}},{"generated":{"line":136,"column":44},"source":"data.js","original":{"line":106,"column":42}},{"generated":{"line":137,"column":0},"source":"data.js","original":{"line":107,"column":6}},{"name":"beginIndex","generated":{"line":137,"column":12},"source":"data.js","original":{"line":107,"column":12}},{"generated":{"line":137,"column":25},"source":"data.js","original":{"line":107,"column":25}},{"name":"exampleBeginIndices_","generated":{"line":137,"column":30},"source":"data.js","original":{"line":107,"column":30}},{"generated":{"line":137,"column":50},"source":"data.js","original":{"line":107,"column":25}},{"generated":{"line":137,"column":51},"source":"data.js","original":{"line":108,"column":8}},{"name":"examplePosition_","generated":{"line":137,"column":56},"source":"data.js","original":{"line":108,"column":13}},{"generated":{"line":137,"column":72},"source":"data.js","original":{"line":108,"column":8}},{"generated":{"line":137,"column":75},"source":"data.js","original":{"line":108,"column":32}},{"name":"exampleBeginIndices_","generated":{"line":137,"column":80},"source":"data.js","original":{"line":108,"column":37}},{"generated":{"line":137,"column":100},"source":"data.js","original":{"line":108,"column":32}},{"name":"length","generated":{"line":137,"column":101},"source":"data.js","original":{"line":108,"column":58}},{"generated":{"line":137,"column":107},"source":"data.js","original":{"line":107,"column":25}},{"generated":{"line":137,"column":108},"source":"data.js","original":{"line":107,"column":6}},{"generated":{"line":138,"column":0},"source":"data.js","original":{"line":109,"column":6}},{"generated":{"line":138,"column":13},"source":"data.js","original":{"line":109,"column":11}},{"name":"j","generated":{"line":138,"column":17},"source":"data.js","original":{"line":109,"column":15}},{"generated":{"line":138,"column":21},"source":"data.js","original":{"line":109,"column":19}},{"generated":{"line":138,"column":22},"source":"data.js","original":{"line":109,"column":6}},{"name":"j","generated":{"line":138,"column":24},"source":"data.js","original":{"line":109,"column":22}},{"generated":{"line":138,"column":28},"source":"data.js","original":{"line":109,"column":26}},{"name":"sampleLen_","generated":{"line":138,"column":33},"source":"data.js","original":{"line":109,"column":31}},{"generated":{"line":138,"column":43},"source":"data.js","original":{"line":109,"column":6}},{"generated":{"line":138,"column":45},"source":"data.js","original":{"line":109,"column":43}},{"name":"j","generated":{"line":138,"column":47},"source":"data.js","original":{"line":109,"column":45}},{"generated":{"line":138,"column":48},"source":"data.js","original":{"line":109,"column":6}},{"generated":{"line":138,"column":50},"source":"data.js","original":{"line":109,"column":48}},{"name":"xsBuffer","generated":{"line":139,"column":0},"source":"data.js","original":{"line":110,"column":8}},{"name":"set","generated":{"line":139,"column":19},"source":"data.js","original":{"line":110,"column":17}},{"generated":{"line":139,"column":22},"source":"data.js","original":{"line":110,"column":8}},{"generated":{"line":139,"column":23},"source":"data.js","original":{"line":110,"column":21}},{"generated":{"line":139,"column":24},"source":"data.js","original":{"line":110,"column":8}},{"name":"i","generated":{"line":139,"column":26},"source":"data.js","original":{"line":110,"column":24}},{"generated":{"line":139,"column":27},"source":"data.js","original":{"line":110,"column":8}},{"name":"j","generated":{"line":139,"column":29},"source":"data.js","original":{"line":110,"column":27}},{"generated":{"line":139,"column":30},"source":"data.js","original":{"line":110,"column":8}},{"generated":{"line":139,"column":32},"source":"data.js","original":{"line":110,"column":30}},{"name":"indices_","generated":{"line":139,"column":37},"source":"data.js","original":{"line":110,"column":35}},{"generated":{"line":139,"column":45},"source":"data.js","original":{"line":110,"column":30}},{"name":"beginIndex","generated":{"line":139,"column":46},"source":"data.js","original":{"line":110,"column":44}},{"name":"j","generated":{"line":139,"column":59},"source":"data.js","original":{"line":110,"column":57}},{"generated":{"line":139,"column":60},"source":"data.js","original":{"line":110,"column":30}},{"generated":{"line":139,"column":61},"source":"data.js","original":{"line":110,"column":8}},{"generated":{"line":140,"column":0},"source":"data.js","original":{"line":111,"column":7}},{"name":"ysBuffer","generated":{"line":141,"column":0},"source":"data.js","original":{"line":112,"column":6}},{"name":"set","generated":{"line":141,"column":17},"source":"data.js","original":{"line":112,"column":15}},{"generated":{"line":141,"column":20},"source":"data.js","original":{"line":112,"column":6}},{"generated":{"line":141,"column":21},"source":"data.js","original":{"line":112,"column":19}},{"generated":{"line":141,"column":22},"source":"data.js","original":{"line":112,"column":6}},{"name":"i","generated":{"line":141,"column":24},"source":"data.js","original":{"line":112,"column":22}},{"generated":{"line":141,"column":25},"source":"data.js","original":{"line":112,"column":6}},{"generated":{"line":141,"column":27},"source":"data.js","original":{"line":112,"column":25}},{"name":"indices_","generated":{"line":141,"column":32},"source":"data.js","original":{"line":112,"column":30}},{"generated":{"line":141,"column":40},"source":"data.js","original":{"line":112,"column":25}},{"name":"beginIndex","generated":{"line":141,"column":41},"source":"data.js","original":{"line":112,"column":39}},{"generated":{"line":141,"column":54},"source":"data.js","original":{"line":112,"column":52}},{"name":"sampleLen_","generated":{"line":141,"column":59},"source":"data.js","original":{"line":112,"column":57}},{"generated":{"line":141,"column":69},"source":"data.js","original":{"line":112,"column":25}},{"generated":{"line":141,"column":70},"source":"data.js","original":{"line":112,"column":6}},{"generated":{"line":142,"column":0},"source":"data.js","original":{"line":113,"column":6}},{"name":"examplePosition_","generated":{"line":142,"column":13},"source":"data.js","original":{"line":113,"column":11}},{"generated":{"line":142,"column":29},"source":"data.js","original":{"line":113,"column":6}},{"generated":{"line":143,"column":0},"source":"data.js","original":{"line":114,"column":5}},{"generated":{"line":144,"column":0},"source":"data.js","original":{"line":115,"column":4}},{"generated":{"line":144,"column":13},"source":"data.js","original":{"line":115,"column":11}},{"name":"xsBuffer","generated":{"line":144,"column":14},"source":"data.js","original":{"line":115,"column":12}},{"name":"toTensor","generated":{"line":144,"column":23},"source":"data.js","original":{"line":115,"column":21}},{"generated":{"line":144,"column":31},"source":"data.js","original":{"line":115,"column":12}},{"generated":{"line":144,"column":33},"source":"data.js","original":{"line":115,"column":11}},{"name":"ysBuffer","generated":{"line":144,"column":35},"source":"data.js","original":{"line":115,"column":33}},{"name":"toTensor","generated":{"line":144,"column":44},"source":"data.js","original":{"line":115,"column":42}},{"generated":{"line":144,"column":52},"source":"data.js","original":{"line":115,"column":33}},{"generated":{"line":144,"column":54},"source":"data.js","original":{"line":115,"column":11}},{"generated":{"line":144,"column":55},"source":"data.js","original":{"line":115,"column":4}},{"generated":{"line":145,"column":0},"source":"data.js","original":{"line":116,"column":3}},{"generated":{"line":147,"column":0},"source":"data.js","original":{"line":118,"column":2}},{"name":"index","generated":{"line":156,"column":35},"source":"data.js","original":{"line":124,"column":17}},{"generated":{"line":156,"column":42},"source":"data.js","original":{"line":124,"column":24}},{"generated":{"line":157,"column":0},"source":"data.js","original":{"line":125,"column":4}},{"generated":{"line":157,"column":13},"source":"data.js","original":{"line":125,"column":11}},{"name":"charSet_","generated":{"line":157,"column":18},"source":"data.js","original":{"line":125,"column":16}},{"generated":{"line":157,"column":26},"source":"data.js","original":{"line":125,"column":11}},{"name":"index","generated":{"line":157,"column":27},"source":"data.js","original":{"line":125,"column":25}},{"generated":{"line":157,"column":32},"source":"data.js","original":{"line":125,"column":11}},{"generated":{"line":157,"column":33},"source":"data.js","original":{"line":125,"column":4}},{"generated":{"line":158,"column":0},"source":"data.js","original":{"line":126,"column":3}},{"generated":{"line":160,"column":0},"source":"data.js","original":{"line":128,"column":2}},{"name":"text","generated":{"line":169,"column":34},"source":"data.js","original":{"line":134,"column":16}},{"generated":{"line":169,"column":40},"source":"data.js","original":{"line":134,"column":22}},{"generated":{"line":170,"column":0},"source":"data.js","original":{"line":135,"column":4}},{"name":"indices","generated":{"line":170,"column":10},"source":"data.js","original":{"line":135,"column":10}},{"generated":{"line":170,"column":20},"source":"data.js","original":{"line":135,"column":20}},{"generated":{"line":170,"column":22},"source":"data.js","original":{"line":135,"column":4}},{"generated":{"line":171,"column":0},"source":"data.js","original":{"line":136,"column":4}},{"generated":{"line":171,"column":11},"source":"data.js","original":{"line":136,"column":9}},{"name":"i","generated":{"line":171,"column":15},"source":"data.js","original":{"line":136,"column":13}},{"generated":{"line":171,"column":19},"source":"data.js","original":{"line":136,"column":17}},{"generated":{"line":171,"column":20},"source":"data.js","original":{"line":136,"column":4}},{"name":"i","generated":{"line":171,"column":22},"source":"data.js","original":{"line":136,"column":20}},{"name":"text","generated":{"line":171,"column":26},"source":"data.js","original":{"line":136,"column":24}},{"name":"length","generated":{"line":171,"column":31},"source":"data.js","original":{"line":136,"column":29}},{"generated":{"line":171,"column":37},"source":"data.js","original":{"line":136,"column":4}},{"generated":{"line":171,"column":39},"source":"data.js","original":{"line":136,"column":37}},{"name":"i","generated":{"line":171,"column":41},"source":"data.js","original":{"line":136,"column":39}},{"generated":{"line":171,"column":42},"source":"data.js","original":{"line":136,"column":4}},{"generated":{"line":171,"column":44},"source":"data.js","original":{"line":136,"column":42}},{"name":"indices","generated":{"line":172,"column":0},"source":"data.js","original":{"line":137,"column":6}},{"name":"push","generated":{"line":172,"column":16},"source":"data.js","original":{"line":137,"column":14}},{"generated":{"line":172,"column":20},"source":"data.js","original":{"line":137,"column":6}},{"generated":{"line":172,"column":21},"source":"data.js","original":{"line":137,"column":19}},{"name":"charSet_","generated":{"line":172,"column":26},"source":"data.js","original":{"line":137,"column":24}},{"generated":{"line":172,"column":34},"source":"data.js","original":{"line":137,"column":19}},{"name":"indexOf","generated":{"line":172,"column":35},"source":"data.js","original":{"line":137,"column":33}},{"generated":{"line":172,"column":42},"source":"data.js","original":{"line":137,"column":19}},{"name":"text","generated":{"line":172,"column":43},"source":"data.js","original":{"line":137,"column":41}},{"name":"i","generated":{"line":172,"column":48},"source":"data.js","original":{"line":137,"column":46}},{"generated":{"line":172,"column":49},"source":"data.js","original":{"line":137,"column":41}},{"generated":{"line":172,"column":50},"source":"data.js","original":{"line":137,"column":19}},{"generated":{"line":172,"column":51},"source":"data.js","original":{"line":137,"column":6}},{"generated":{"line":173,"column":0},"source":"data.js","original":{"line":138,"column":5}},{"generated":{"line":174,"column":0},"source":"data.js","original":{"line":139,"column":4}},{"name":"indices","generated":{"line":174,"column":13},"source":"data.js","original":{"line":139,"column":11}},{"generated":{"line":174,"column":20},"source":"data.js","original":{"line":139,"column":4}},{"generated":{"line":175,"column":0},"source":"data.js","original":{"line":140,"column":3}},{"generated":{"line":177,"column":0},"source":"data.js","original":{"line":142,"column":2}},{"generated":{"line":186,"column":37},"source":"data.js","original":{"line":148,"column":19}},{"generated":{"line":187,"column":0},"source":"data.js","original":{"line":149,"column":4}},{"name":"startIndex","generated":{"line":187,"column":10},"source":"data.js","original":{"line":149,"column":10}},{"name":"Math","generated":{"line":187,"column":23},"source":"data.js","original":{"line":150,"column":6}},{"name":"round","generated":{"line":187,"column":28},"source":"data.js","original":{"line":150,"column":11}},{"generated":{"line":187,"column":33},"source":"data.js","original":{"line":150,"column":6}},{"name":"Math","generated":{"line":187,"column":34},"source":"data.js","original":{"line":150,"column":17}},{"name":"random","generated":{"line":187,"column":39},"source":"data.js","original":{"line":150,"column":22}},{"generated":{"line":187,"column":45},"source":"data.js","original":{"line":150,"column":17}},{"generated":{"line":187,"column":51},"source":"data.js","original":{"line":150,"column":34}},{"name":"textLen_","generated":{"line":187,"column":56},"source":"data.js","original":{"line":150,"column":39}},{"generated":{"line":187,"column":64},"source":"data.js","original":{"line":150,"column":34}},{"generated":{"line":187,"column":67},"source":"data.js","original":{"line":150,"column":50}},{"name":"sampleLen_","generated":{"line":187,"column":72},"source":"data.js","original":{"line":150,"column":55}},{"generated":{"line":187,"column":82},"source":"data.js","original":{"line":150,"column":34}},{"generated":{"line":187,"column":85},"source":"data.js","original":{"line":150,"column":68}},{"generated":{"line":187,"column":86},"source":"data.js","original":{"line":150,"column":17}},{"generated":{"line":187,"column":87},"source":"data.js","original":{"line":150,"column":6}},{"generated":{"line":187,"column":88},"source":"data.js","original":{"line":149,"column":4}},{"generated":{"line":188,"column":0},"source":"data.js","original":{"line":151,"column":4}},{"name":"textSlice","generated":{"line":188,"column":10},"source":"data.js","original":{"line":151,"column":10}},{"generated":{"line":188,"column":22},"source":"data.js","original":{"line":151,"column":22}},{"name":"slice_","generated":{"line":188,"column":27},"source":"data.js","original":{"line":151,"column":27}},{"generated":{"line":188,"column":33},"source":"data.js","original":{"line":151,"column":22}},{"name":"startIndex","generated":{"line":188,"column":34},"source":"data.js","original":{"line":151,"column":34}},{"generated":{"line":188,"column":44},"source":"data.js","original":{"line":151,"column":22}},{"name":"startIndex","generated":{"line":188,"column":46},"source":"data.js","original":{"line":151,"column":46}},{"generated":{"line":188,"column":59},"source":"data.js","original":{"line":151,"column":59}},{"name":"sampleLen_","generated":{"line":188,"column":64},"source":"data.js","original":{"line":151,"column":64}},{"generated":{"line":188,"column":74},"source":"data.js","original":{"line":151,"column":22}},{"generated":{"line":188,"column":75},"source":"data.js","original":{"line":151,"column":4}},{"generated":{"line":189,"column":0},"source":"data.js","original":{"line":152,"column":4}},{"generated":{"line":189,"column":13},"source":"data.js","original":{"line":152,"column":11}},{"name":"textSlice","generated":{"line":189,"column":14},"source":"data.js","original":{"line":152,"column":12}},{"generated":{"line":189,"column":23},"source":"data.js","original":{"line":152,"column":11}},{"generated":{"line":189,"column":25},"source":"data.js","original":{"line":152,"column":23}},{"name":"textToIndices","generated":{"line":189,"column":30},"source":"data.js","original":{"line":152,"column":28}},{"generated":{"line":189,"column":43},"source":"data.js","original":{"line":152,"column":23}},{"name":"textSlice","generated":{"line":189,"column":44},"source":"data.js","original":{"line":152,"column":42}},{"generated":{"line":189,"column":53},"source":"data.js","original":{"line":152,"column":23}},{"generated":{"line":189,"column":54},"source":"data.js","original":{"line":152,"column":11}},{"generated":{"line":189,"column":55},"source":"data.js","original":{"line":152,"column":4}},{"generated":{"line":190,"column":0},"source":"data.js","original":{"line":153,"column":3}},{"generated":{"line":192,"column":0},"source":"data.js","original":{"line":155,"column":2}},{"name":"startIndex","generated":{"line":203,"column":27},"source":"data.js","original":{"line":163,"column":9}},{"name":"endIndex","generated":{"line":203,"column":39},"source":"data.js","original":{"line":163,"column":21}},{"generated":{"line":203,"column":49},"source":"data.js","original":{"line":163,"column":31}},{"generated":{"line":204,"column":0},"source":"data.js","original":{"line":164,"column":4}},{"generated":{"line":204,"column":13},"source":"data.js","original":{"line":164,"column":11}},{"name":"textString_","generated":{"line":204,"column":18},"source":"data.js","original":{"line":164,"column":16}},{"generated":{"line":204,"column":29},"source":"data.js","original":{"line":164,"column":11}},{"name":"slice","generated":{"line":204,"column":30},"source":"data.js","original":{"line":164,"column":28}},{"generated":{"line":204,"column":35},"source":"data.js","original":{"line":164,"column":11}},{"name":"startIndex","generated":{"line":204,"column":36},"source":"data.js","original":{"line":164,"column":34}},{"generated":{"line":204,"column":46},"source":"data.js","original":{"line":164,"column":11}},{"name":"endIndex","generated":{"line":204,"column":48},"source":"data.js","original":{"line":164,"column":46}},{"generated":{"line":204,"column":56},"source":"data.js","original":{"line":164,"column":11}},{"generated":{"line":204,"column":57},"source":"data.js","original":{"line":164,"column":4}},{"generated":{"line":205,"column":0},"source":"data.js","original":{"line":165,"column":3}},{"generated":{"line":207,"column":0},"source":"data.js","original":{"line":167,"column":2}},{"generated":{"line":213,"column":34},"source":"data.js","original":{"line":170,"column":16}},{"generated":{"line":214,"column":0},"source":"data.js","original":{"line":171,"column":4}},{"name":"charSet_","generated":{"line":214,"column":11},"source":"data.js","original":{"line":171,"column":9}},{"generated":{"line":214,"column":19},"source":"data.js","original":{"line":171,"column":4}},{"generated":{"line":214,"column":22},"source":"data.js","original":{"line":171,"column":20}},{"generated":{"line":214,"column":24},"source":"data.js","original":{"line":171,"column":4}},{"generated":{"line":215,"column":0},"source":"data.js","original":{"line":172,"column":4}},{"generated":{"line":215,"column":11},"source":"data.js","original":{"line":172,"column":9}},{"name":"i","generated":{"line":215,"column":15},"source":"data.js","original":{"line":172,"column":13}},{"generated":{"line":215,"column":19},"source":"data.js","original":{"line":172,"column":17}},{"generated":{"line":215,"column":20},"source":"data.js","original":{"line":172,"column":4}},{"name":"i","generated":{"line":215,"column":22},"source":"data.js","original":{"line":172,"column":20}},{"generated":{"line":215,"column":26},"source":"data.js","original":{"line":172,"column":24}},{"name":"textLen_","generated":{"line":215,"column":31},"source":"data.js","original":{"line":172,"column":29}},{"generated":{"line":215,"column":39},"source":"data.js","original":{"line":172,"column":4}},{"generated":{"line":215,"column":41},"source":"data.js","original":{"line":172,"column":39}},{"name":"i","generated":{"line":215,"column":43},"source":"data.js","original":{"line":172,"column":41}},{"generated":{"line":215,"column":44},"source":"data.js","original":{"line":172,"column":4}},{"generated":{"line":215,"column":46},"source":"data.js","original":{"line":172,"column":44}},{"generated":{"line":216,"column":0},"source":"data.js","original":{"line":173,"column":6}},{"generated":{"line":216,"column":12},"source":"data.js","original":{"line":173,"column":10}},{"name":"charSet_","generated":{"line":216,"column":17},"source":"data.js","original":{"line":173,"column":15}},{"generated":{"line":216,"column":25},"source":"data.js","original":{"line":173,"column":10}},{"name":"indexOf","generated":{"line":216,"column":26},"source":"data.js","original":{"line":173,"column":24}},{"generated":{"line":216,"column":33},"source":"data.js","original":{"line":173,"column":10}},{"generated":{"line":216,"column":34},"source":"data.js","original":{"line":173,"column":32}},{"name":"textString_","generated":{"line":216,"column":39},"source":"data.js","original":{"line":173,"column":37}},{"generated":{"line":216,"column":50},"source":"data.js","original":{"line":173,"column":32}},{"name":"i","generated":{"line":216,"column":51},"source":"data.js","original":{"line":173,"column":49}},{"generated":{"line":216,"column":52},"source":"data.js","original":{"line":173,"column":32}},{"generated":{"line":216,"column":53},"source":"data.js","original":{"line":173,"column":10}},{"generated":{"line":216,"column":59},"source":"data.js","original":{"line":173,"column":57}},{"generated":{"line":216,"column":60},"source":"data.js","original":{"line":173,"column":58}},{"generated":{"line":216,"column":61},"source":"data.js","original":{"line":173,"column":6}},{"generated":{"line":216,"column":63},"source":"data.js","original":{"line":173,"column":61}},{"generated":{"line":217,"column":0},"source":"data.js","original":{"line":174,"column":8}},{"name":"charSet_","generated":{"line":217,"column":15},"source":"data.js","original":{"line":174,"column":13}},{"generated":{"line":217,"column":23},"source":"data.js","original":{"line":174,"column":8}},{"name":"push","generated":{"line":217,"column":24},"source":"data.js","original":{"line":174,"column":22}},{"generated":{"line":217,"column":28},"source":"data.js","original":{"line":174,"column":8}},{"generated":{"line":217,"column":29},"source":"data.js","original":{"line":174,"column":27}},{"name":"textString_","generated":{"line":217,"column":34},"source":"data.js","original":{"line":174,"column":32}},{"generated":{"line":217,"column":45},"source":"data.js","original":{"line":174,"column":27}},{"name":"i","generated":{"line":217,"column":46},"source":"data.js","original":{"line":174,"column":44}},{"generated":{"line":217,"column":47},"source":"data.js","original":{"line":174,"column":27}},{"generated":{"line":217,"column":48},"source":"data.js","original":{"line":174,"column":8}},{"generated":{"line":218,"column":0},"source":"data.js","original":{"line":175,"column":7}},{"generated":{"line":219,"column":0},"source":"data.js","original":{"line":176,"column":5}},{"generated":{"line":220,"column":0},"source":"data.js","original":{"line":177,"column":4}},{"name":"charSetSize_","generated":{"line":220,"column":11},"source":"data.js","original":{"line":177,"column":9}},{"generated":{"line":220,"column":23},"source":"data.js","original":{"line":177,"column":4}},{"generated":{"line":220,"column":26},"source":"data.js","original":{"line":177,"column":24}},{"name":"charSet_","generated":{"line":220,"column":31},"source":"data.js","original":{"line":177,"column":29}},{"generated":{"line":220,"column":39},"source":"data.js","original":{"line":177,"column":24}},{"name":"length","generated":{"line":220,"column":40},"source":"data.js","original":{"line":177,"column":38}},{"generated":{"line":220,"column":46},"source":"data.js","original":{"line":177,"column":4}},{"generated":{"line":221,"column":0},"source":"data.js","original":{"line":178,"column":3}},{"generated":{"line":223,"column":0},"source":"data.js","original":{"line":180,"column":2}},{"generated":{"line":229,"column":47},"source":"data.js","original":{"line":183,"column":29}},{"generated":{"line":230,"column":0},"source":"data.js","original":{"line":184,"column":4}},{"name":"indices_","generated":{"line":230,"column":11},"source":"data.js","original":{"line":184,"column":9}},{"generated":{"line":230,"column":19},"source":"data.js","original":{"line":184,"column":4}},{"generated":{"line":230,"column":22},"source":"data.js","original":{"line":184,"column":20}},{"name":"Uint16Array","generated":{"line":230,"column":26},"source":"data.js","original":{"line":184,"column":24}},{"generated":{"line":230,"column":37},"source":"data.js","original":{"line":184,"column":20}},{"generated":{"line":230,"column":38},"source":"data.js","original":{"line":184,"column":36}},{"name":"textToIndices","generated":{"line":230,"column":43},"source":"data.js","original":{"line":184,"column":41}},{"generated":{"line":230,"column":56},"source":"data.js","original":{"line":184,"column":36}},{"generated":{"line":230,"column":57},"source":"data.js","original":{"line":184,"column":55}},{"name":"textString_","generated":{"line":230,"column":62},"source":"data.js","original":{"line":184,"column":60}},{"generated":{"line":230,"column":73},"source":"data.js","original":{"line":184,"column":36}},{"generated":{"line":230,"column":74},"source":"data.js","original":{"line":184,"column":20}},{"generated":{"line":230,"column":75},"source":"data.js","original":{"line":184,"column":4}},{"generated":{"line":231,"column":0},"source":"data.js","original":{"line":185,"column":3}},{"generated":{"line":233,"column":0},"source":"data.js","original":{"line":187,"column":2}},{"generated":{"line":239,"column":51},"source":"data.js","original":{"line":190,"column":33}},{"generated":{"line":240,"column":0},"source":"data.js","original":{"line":191,"column":4}},{"generated":{"line":241,"column":0},"source":"data.js","original":{"line":192,"column":4}},{"name":"exampleBeginIndices_","generated":{"line":241,"column":11},"source":"data.js","original":{"line":192,"column":9}},{"generated":{"line":241,"column":31},"source":"data.js","original":{"line":192,"column":4}},{"generated":{"line":241,"column":34},"source":"data.js","original":{"line":192,"column":32}},{"generated":{"line":241,"column":36},"source":"data.js","original":{"line":192,"column":4}},{"generated":{"line":242,"column":0},"source":"data.js","original":{"line":193,"column":4}},{"generated":{"line":242,"column":11},"source":"data.js","original":{"line":193,"column":9}},{"name":"i","generated":{"line":242,"column":15},"source":"data.js","original":{"line":193,"column":13}},{"generated":{"line":242,"column":19},"source":"data.js","original":{"line":193,"column":17}},{"generated":{"line":242,"column":20},"source":"data.js","original":{"line":193,"column":4}},{"name":"i","generated":{"line":242,"column":22},"source":"data.js","original":{"line":194,"column":6}},{"generated":{"line":242,"column":26},"source":"data.js","original":{"line":194,"column":10}},{"name":"textLen_","generated":{"line":242,"column":31},"source":"data.js","original":{"line":194,"column":15}},{"generated":{"line":242,"column":39},"source":"data.js","original":{"line":194,"column":10}},{"generated":{"line":242,"column":42},"source":"data.js","original":{"line":194,"column":26}},{"name":"sampleLen_","generated":{"line":242,"column":47},"source":"data.js","original":{"line":194,"column":31}},{"generated":{"line":242,"column":57},"source":"data.js","original":{"line":194,"column":10}},{"generated":{"line":242,"column":60},"source":"data.js","original":{"line":194,"column":44}},{"generated":{"line":242,"column":61},"source":"data.js","original":{"line":193,"column":4}},{"name":"i","generated":{"line":242,"column":63},"source":"data.js","original":{"line":195,"column":6}},{"generated":{"line":242,"column":68},"source":"data.js","original":{"line":195,"column":11}},{"name":"sampleStep_","generated":{"line":242,"column":73},"source":"data.js","original":{"line":195,"column":16}},{"generated":{"line":242,"column":84},"source":"data.js","original":{"line":193,"column":4}},{"generated":{"line":242,"column":86},"source":"data.js","original":{"line":195,"column":29}},{"generated":{"line":243,"column":0},"source":"data.js","original":{"line":196,"column":6}},{"name":"exampleBeginIndices_","generated":{"line":243,"column":13},"source":"data.js","original":{"line":196,"column":11}},{"generated":{"line":243,"column":33},"source":"data.js","original":{"line":196,"column":6}},{"name":"push","generated":{"line":243,"column":34},"source":"data.js","original":{"line":196,"column":32}},{"generated":{"line":243,"column":38},"source":"data.js","original":{"line":196,"column":6}},{"name":"i","generated":{"line":243,"column":39},"source":"data.js","original":{"line":196,"column":37}},{"generated":{"line":243,"column":40},"source":"data.js","original":{"line":196,"column":6}},{"generated":{"line":244,"column":0},"source":"data.js","original":{"line":197,"column":5}},{"generated":{"line":246,"column":0},"source":"data.js","original":{"line":199,"column":4}},{"name":"tf","generated":{"line":247,"column":0},"source":"data.js","original":{"line":200,"column":4}},{"name":"util","generated":{"line":247,"column":9},"source":"data.js","original":{"line":200,"column":7}},{"generated":{"line":247,"column":13},"source":"data.js","original":{"line":200,"column":4}},{"name":"shuffle","generated":{"line":247,"column":14},"source":"data.js","original":{"line":200,"column":12}},{"generated":{"line":247,"column":21},"source":"data.js","original":{"line":200,"column":4}},{"generated":{"line":247,"column":22},"source":"data.js","original":{"line":200,"column":20}},{"name":"exampleBeginIndices_","generated":{"line":247,"column":27},"source":"data.js","original":{"line":200,"column":25}},{"generated":{"line":247,"column":47},"source":"data.js","original":{"line":200,"column":4}},{"generated":{"line":248,"column":0},"source":"data.js","original":{"line":201,"column":4}},{"name":"examplePosition_","generated":{"line":248,"column":11},"source":"data.js","original":{"line":201,"column":9}},{"generated":{"line":248,"column":27},"source":"data.js","original":{"line":201,"column":4}},{"generated":{"line":248,"column":30},"source":"data.js","original":{"line":201,"column":28}},{"generated":{"line":248,"column":31},"source":"data.js","original":{"line":201,"column":4}},{"generated":{"line":249,"column":0},"source":"data.js","original":{"line":202,"column":3}}],"sources":{"data.js":"// This file treats the text data - can be twitched to fit our preferences\n\n/**\n * @license\n * Copyright 2018 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport * as tf from '@tensorflow/tfjs';\n\n/**\n * A class for text data.\n *\n * This class manages the following:\n *\n * - Converting training data (as a string) into one-hot encoded vectors.\n * - Drawing random slices from the training data. This is useful for training\n *   models and obtaining the seed text for model-based text generation.\n */\nexport class TextData {\n  /**\n   * Constructor of TextData.\n   *\n   * @param {string} dataIdentifier An identifier for this instance of TextData.\n   * @param {string} textString The training text data.\n   * @param {number} sampleLen Length of each training example, i.e., the input\n   *   sequence length expected by the LSTM model.\n   * @param {number} sampleStep How many characters to skip when going from one\n   *   example of the training data (in `textString`) to the next.\n   */\n  constructor(dataIdentifier, textString, sampleLen, sampleStep) {\n    if (!dataIdentifier) {\n      throw new Error('Model identifier is not provided.');\n    }\n\n    this.dataIdentifier_ = dataIdentifier;\n\n    this.textString_ = textString;\n    this.textLen_ = textString.length;\n    this.sampleLen_ = sampleLen;\n    this.sampleStep_ = sampleStep;\n\n    this.getCharSet_();\n    this.convertAllTextToIndices_();\n    this.generateExampleBeginIndices_();\n  }\n\n  /**\n   * Get data identifier.\n   *\n   * @returns {string} The data identifier.\n   */\n  dataIdentifier() {\n    return this.dataIdentifier_;\n  }\n\n  /**\n   * Get length of the training text data.\n   *\n   * @returns {number} Length of training text data.\n   */\n  textLen() {\n    return this.textLen_;\n  }\n\n  /**\n   * Get the length of each training example.\n   */\n  sampleLen() {\n    return this.sampleLen_;\n  }\n\n  /**\n   * Get the size of the character set.\n   *\n   * @returns {number} Size of the character set, i.e., how many unique\n   *   characters there are in the training text data.\n   */\n  charSetSize() {\n    return this.charSetSize_;\n  }\n\n  /**\n   * Generate the next epoch of data for training models.\n   *\n   * @param {number} numExamples Number examples to generate.\n   * @returns {[tf.Tensor, tf.Tensor]} `xs` and `ys` Tensors.\n   *   `xs` has the shape of `[numExamples, this.sampleLen, this.charSetSize]`.\n   *   `ys` has the shape of `[numExamples, this.charSetSize]`.\n   */\n  nextDataEpoch(numExamples) {\n    const xsBuffer = new tf.TensorBuffer([\n      numExamples, this.sampleLen_, this.charSetSize_]);\n    const ysBuffer = new tf.TensorBuffer([numExamples, this.charSetSize_]);\n    for (let i = 0; i < numExamples; ++i) {\n      const beginIndex = this.exampleBeginIndices_[\n        this.examplePosition_ % this.exampleBeginIndices_.length];\n      for (let j = 0; j < this.sampleLen_; ++j) {\n        xsBuffer.set(1, i, j, this.indices_[beginIndex + j]);\n      }\n      ysBuffer.set(1, i, this.indices_[beginIndex + this.sampleLen_]);\n      this.examplePosition_++;\n    }\n    return [xsBuffer.toTensor(), ysBuffer.toTensor()];\n  }\n\n  /**\n   * Get the unique character at given index from the character set.\n   *\n   * @param {number} index\n   * @returns {string} The unique character at `index` of the character set.\n   */\n  getFromCharSet(index) {\n    return this.charSet_[index];\n  }\n\n  /**\n   * Convert text string to integer indices.\n   *\n   * @param {string} text Input text.\n   * @returns {number[]} Indices of the characters of `text`.\n   */\n  textToIndices(text) {\n    const indices = [];\n    for (let i = 0; i < text.length; ++i) {\n      indices.push(this.charSet_.indexOf(text[i]));\n    }\n    return indices;\n  }\n\n  /**\n   * Get a random slice of text data.\n   *\n   * @returns {[string, number[]} The string and index representation of the\n   *   same slice.\n   */\n  getRandomSlice() {\n    const startIndex =\n      Math.round(Math.random() * (this.textLen_ - this.sampleLen_ - 1));\n    const textSlice = this.slice_(startIndex, startIndex + this.sampleLen_);\n    return [textSlice, this.textToIndices(textSlice)];\n  }\n\n  /**\n   * Get a slice of the training text data.\n   *\n   * @param {number} startIndex\n   * @param {number} endIndex\n   * @param {bool} useIndices Whether to return the indices instead of string.\n   * @returns {string | Uint16Array} The result of the slicing.\n   */\n  slice_(startIndex, endIndex) {\n    return this.textString_.slice(startIndex, endIndex);\n  }\n\n  /**\n   * Get the set of unique characters from text.\n   */\n  getCharSet_() {\n    this.charSet_ = [];\n    for (let i = 0; i < this.textLen_; ++i) {\n      if (this.charSet_.indexOf(this.textString_[i]) === -1) {\n        this.charSet_.push(this.textString_[i]);\n      }\n    }\n    this.charSetSize_ = this.charSet_.length;\n  }\n\n  /**\n   * Convert all training text to integer indices.\n   */\n  convertAllTextToIndices_() {\n    this.indices_ = new Uint16Array(this.textToIndices(this.textString_));\n  }\n\n  /**\n   * Generate the example-begin indices; shuffle them randomly.\n   */\n  generateExampleBeginIndices_() {\n    // Prepare beginning indices of examples.\n    this.exampleBeginIndices_ = [];\n    for (let i = 0;\n      i < this.textLen_ - this.sampleLen_ - 1;\n      i += this.sampleStep_) {\n      this.exampleBeginIndices_.push(i);\n    }\n\n    // Randomly shuffle the beginning indices.\n    tf.util.shuffle(this.exampleBeginIndices_);\n    this.examplePosition_ = 0;\n  }\n}\n"},"lineCount":null}},"hash":"6456b384421eba1479a8556871d13e3d","cacheData":{"env":{}}}